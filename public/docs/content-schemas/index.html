<!doctypehtml><html lang=en-us><meta charset=UTF-8><meta content=width=device-width,initial-scale=1.0 name=viewport><meta content=Norgolith name=generator><meta content="Norgolith configuration reference"name=description><meta content=NTBBloodbath name=author><meta content=docs name=keywords><link href=https://ntbbloodbath.github.io/norgolith/assets/css/prism-sweetie.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js></script><script>document.addEventListener(`alpine:init`,()=>{let b=`dark`,a=`theme`,c=`light`;Alpine.data(`menu`,()=>({currentPage:window.location.pathname,openMobile:!1,toggleMobile(){this.openMobile=!this.openMobile}}));Alpine.data(`toc`,()=>({open:!0,toggle(){this.open=!this.open}}));Alpine.data(a,()=>({current:b,init(){const d=localStorage.getItem(a);if(d===b){this.current=b}else if(d===c){this.current=c}else if(window.matchMedia(`(prefers-color-scheme: dark)`).matches){this.current=b};localStorage.setItem(a,this.current);if(this.current===b){document.documentElement.classList.add(b)}},toggle(){this.current=this.current===b?c:b;document.documentElement.classList.toggle(b,this.current===b);localStorage.setItem(a,this.current)}}))})</script><link href=https://cdnjs.cloudflare.com/ajax/libs/tabler-icons/3.28.1/tabler-icons.min.css rel=stylesheet><link href=https://ntbbloodbath.github.io/norgolith/assets/css/styles.min.css rel=stylesheet><link href=https://ntbbloodbath.github.io/norgolith/assets/norgolith.svg rel=icon><title>Content Schema System - Norgolith</title><body><header class="relative shadow-sm"><nav class="container mx-auto px-4 md:px-0 font-mono"x-data=menu><div class="flex items-center justify-between h-16"><div class="flex items-center shrink-0"x-data=theme><a class="flex items-center space-x-2"href=https://ntbbloodbath.github.io/norgolith/>  <span class="text-xl font-bold text-text">Norgolith</span> </a><button :aria-label="current === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'"class="ml-2 md:ml-4 rounded-lg transition-colors flex items-center"@click=toggle() type=button><i class="ti ti-moon text-2xl text-grey hover:text-blue"x-show="current === 'light'"></i> <i class="ti ti-sun text-2xl text-grey hover:text-yellow"x-show="current === 'dark'"></i></button></div><div class="hidden md:flex md:items-center md:space-x-8"><a :class="{ 'text-blue!': currentPage.startsWith('/docs') }"class="text-text-alt hover:text-blue px-3 py-2 rounded-md text-sm font-medium"href=https://ntbbloodbath.github.io/norgolith/docs>Docs</a><a :class="{ 'text-blue!': currentPage.startsWith('/posts') }"class="text-text-alt hover:text-blue px-3 py-2 rounded-md text-sm font-medium"href=https://ntbbloodbath.github.io/norgolith/posts>Blog</a><a :class="{ 'text-blue!': currentPage.startsWith('https://github.com/NTBBloodbath/norgolith') }"class="text-text-alt hover:text-blue px-3 py-2 rounded-md text-sm font-medium"href=https://github.com/NTBBloodbath/norgolith>Source</a></div><div class=md:hidden><button class="inline-flex items-center justify-center p-2 rounded-md text-dark-grey hover:text-text-alt focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"@click=toggleMobile aria-controls=mobile-menu aria-expanded=false type=button><span class=sr-only>Open main menu</span>  <svg class="h-6 w-6"viewbox="0 0 24 24"fill=none stroke=currentColor x-show=!openMobile><path d="M4 6h16M4 12h16M4 18h16"stroke-linecap=round stroke-linejoin=round stroke-width=2 /></svg>  <svg class="h-6 w-6 text-red"viewbox="0 0 24 24"fill=none stroke=currentColor x-show=openMobile><path d="M6 18L18 6M6 6l12 12"stroke-linecap=round stroke-linejoin=round stroke-width=2 /></svg></button></div></div><div @click.outside="openMobile = false"class=md:hidden id=mobile-menu x-show=openMobile><div class="flex flex-row items-center justify-between px-2 pt-2 pb-3 space-y-1 sm:px-3"><a :class="{ 'text-blue!': currentPage.startsWith('/docs') }"class="text-text-alt hover:text-blue px-3 py-2 rounded-md text-sm font-medium"href=https://ntbbloodbath.github.io/norgolith/docs>Docs</a><a :class="{ 'text-blue!': currentPage.startsWith('/posts') }"class="text-text-alt hover:text-blue px-3 py-2 rounded-md text-sm font-medium"href=https://ntbbloodbath.github.io/norgolith/posts>Blog</a><a :class="{ 'text-blue!': currentPage.startsWith('https://github.com/NTBBloodbath/norgolith') }"class="text-text-alt hover:text-blue px-3 py-2 rounded-md text-sm font-medium"href=https://github.com/NTBBloodbath/norgolith>Source</a></div></div></nav></header><main class="container mx-auto min-h-screen pt-8 px-4 md:px-0"><div><h1>Content Schema System</h1></div><div class="flex flex-row"><div class="flex flex-1 items-center justify-between"><div><span> <time class="text-grey text-sm md:text-md lg:text-lg tabular-nums text-opacity-70 dark:text-opacity-100"datetime=2025-03-10T14:00:32-04:00><strong>Last updated:</strong> March 10, 2025</time> </span></div></div></div><div class=mt-4 x-data=toc><button class="inline-flex items-center"@click=toggle type=button><span class=sr-only>Close Table of Contents</span> <h3 class="mt-0! mr-1">Table of Contents</h3> <span :class="{ 'ti-arrow-badge-up-filled': open }"class="text-2xl hover:text-blue ti ti-arrow-badge-down-filled"></span></button><nav class=toc x-show=open><ol><li><a href=#Why-Use-Content-Schemas?>Why Use Content Schemas?</a><li><a href=#Schema-Basics>Schema Basics</a><ol><li><a href=#Example:-Basic-Schema>Example: Basic Schema</a></ol><li><a href=#Field-Types>Field Types</a><ol><li><a href=#String>String</a><ol><li><a href=#Options>Options</a><li><a href=#Example>Example</a></ol><li><a href=#Boolean>Boolean</a><ol><li><a href=#Example>Example</a></ol><li><a href=#Array>Array</a><ol><li><a href=#Options>Options</a><li><a href=#Example>Example</a></ol><li><a href=#Object>Object</a><ol><li><a href=#Options>Options</a><li><a href=#Example>Example</a></ol></ol><li><a href=#Validation-Rules>Validation Rules</a><ol><li><a href=#Example:-Conditional-Rule>Example: Conditional Rule</a></ol><li><a href=#Schema-Inheritance>Schema Inheritance</a><ol><li><a href=#Example:-Path-Based-Inheritance>Example: Path-Based Inheritance</a></ol><li><a href=#Practical-Examples>Practical Examples</a><ol><li><a href=#Example-1:-Blog-Post-Schema>Example 1: Blog Post Schema</a><li><a href=#Example-2:-Project-Documentation-Schema>Example 2: Project Documentation Schema</a></ol><li><a href=#Troubleshooting-Validation-Errors>Troubleshooting Validation Errors</a><ol><li><a href=#Common-Errors-and-Fixes>Common Errors and Fixes</a><ol><li><a href=#Missing-Required-Field>Missing Required Field</a><li><a href=#Type-Mismatch>Type Mismatch</a><li><a href=#Constraint-Violation>Constraint Violation</a><li><a href=#Rule-Condition-Failed>Rule Condition Failed</a></ol></ol></ol></nav></div><hr class="text-base-alt mt-12 lg:mt-14"><div class="mt-12 lg:mt-14 text-justify break-keep"><p>Norgolith content schemas system allows you to define and enforce structure and validation rules for your Norg documents’ metadata. This ensures consistency across your content and prevents errors during the build process.<h2 id=Why-Use-Content-Schemas?>Why Use Content Schemas?</h2><p>Content schemas are particularly useful for:<ul><li><strong>Enforcing consistency</strong>: Ensure all posts have required fields like <code>title</code>, <code>author</code>, or <code>publish_date</code>.</ul><ul><li><strong>Preventing errors</strong>: Catch missing or invalid metadata before building your site.</ul><ul><li><strong>Conditional logic</strong>: Require specific fields based on other metadata (e.g., require <code>hero_image</code> if <code>featured = true</code>).</ul><ul><li><strong>Team collaboration</strong>: Provide clear guidelines for content contributors.</ul><hr class="text-base-alt mt-12 lg:mt-14"><h2 id=Schema-Basics>Schema Basics</h2><p>Content schemas are defined in your <code>norgolith.toml</code> file under the <code>[content_schema]</code> section. A schema consists of:<ul><li><strong>Required fields</strong>: Fields that must be present in the metadata.</ul><ul><li><strong>Field definitions</strong>: Rules for validating individual fields.</ul><ul><li><strong>Validation rules</strong>: Conditional logic for enforcing additional constraints.</ul><h3 id=Example:-Basic-Schema>Example: Basic Schema</h3><pre><code class=language-toml>[content_schema]
required = ["title", "author"]

[content_schema.fields.title]
type = "string"
max_length = 120

[content_schema.fields.author]
type = "string"
</code></pre><h2 id=Field-Types>Field Types</h2><p>Norgolith supports several field types, each with its own validation rules:<h3 id=String>String</h3><ul><li>Validates text fields.</ul><h4 id=Options>Options</h4><ul><li><code>max_length</code>: Maximum allowed characters.</ul><ul><li><code>pattern</code>: Regex pattern for validation.</ul><h4 id=Example>Example</h4><pre><code class=language-toml>[content_schema.fields.title]
type = "string"
max_length = 100
pattern = "^[A-Z].*"  # Must start with uppercase letter
</code></pre><h3 id=Boolean>Boolean</h3><ul><li>Validates <code>true</code> or <code>false</code> values.</ul><h4 id=Example>Example</h4><pre><code class=language-toml>[content_schema.fields.draft]
type = "boolean"
</code></pre><h3 id=Array>Array</h3><ul><li>Validates lists of items.</ul><h4 id=Options>Options</h4><ul><li><code>items</code>: Schema for individual items.</ul><ul><li><code>min_items</code>: Minimum number of items.</ul><ul><li><code>max_items</code>: Maximum number of items.</ul><ul><li><code>must_contain</code>: Specific values that must be present.</ul><h4 id=Example>Example</h4><pre><code class=language-toml>[content_schema.fields.categories]
type = "array"
items = { type = "string" }
min_items = 1
max_items = 5
must_contain = ["norgolith"]
</code></pre><h3 id=Object>Object</h3><ul><li>Validates nested metadata structures.</ul><h4 id=Options>Options</h4><ul><li><code>schema</code>: Nested metadata structure schema.</ul><h4 id=Example>Example</h4><pre><code class=language-toml>[content_schema.fields.author]
type = "object"
schema = { name = { type = "string" }, email = { type = "string" } }
</code></pre><h2 id=Validation-Rules>Validation Rules</h2><p>Validation rules allow you to enforce conditional logic based on metadata values.<h3 id=Example:-Conditional-Rule>Example: Conditional Rule</h3><pre><code class=language-toml>[content_schema.posts.rules]
if = { draft = false }  # Condition
then = { required = ["publish_date"] }  # Action
</code></pre><p>This rule ensures that if <code>draft</code> is <code>false</code>, the <code>publish_date</code> field must be present in any <code>posts/</code> file.<h2 id=Schema-Inheritance>Schema Inheritance</h2><p>Schemas can inherit and extend rules based on content paths. For example, rules for <code>/posts</code> can extend global rules, and <code>/posts/2023</code> can further extend <code>/posts</code>.<h3 id=Example:-Path-Based-Inheritance>Example: Path-Based Inheritance</h3><pre><code class=language-toml># Global rules
[content_schema]
required = ["title"]

# Rules for /posts
[content_schema.posts]
required = ["category"]

# Rules for /posts/2023
[content_schema.posts.2023]
required = ["year"]
</code></pre><p>In this example:<ul><li>All content requires a <code>title</code> field.</ul><ul><li>Posts require a <code>category</code> field.</ul><ul><li>Posts in <code>/posts/2023</code> require a <code>year</code> field.</ul><hr class="text-base-alt mt-12 lg:mt-14"><h2 id=Practical-Examples>Practical Examples</h2><h3 id=Example-1:-Blog-Post-Schema>Example 1: Blog Post Schema</h3><pre><code class=language-toml>[content_schema]
required = ["title", "author"]

[content_schema.fields.title]
type = "string"
max_length = 120

[content_schema.fields.author]
type = "string"

[content_schema.posts.rules]
if = { draft = false }
then = { required = ["publish_date"] }
</code></pre><h3 id=Example-2:-Project-Documentation-Schema>Example 2: Project Documentation Schema</h3><pre><code class=language-toml>[content_schema]
required = ["title", "version"]

[content_schema.fields.title]
type = "string"

[content_schema.fields.project_version]
type = "string"
pattern = '^\d+\.\d+\.\d+$'  # Semantic versioning

[content_schema.docs.rules]
if = { status = "published" }
then = { required = ["reviewer"] }
</code></pre><hr class="text-base-alt mt-12 lg:mt-14"><h2 id=Troubleshooting-Validation-Errors>Troubleshooting Validation Errors</h2><p>Norgolith will show you validation issues by default in the following format, either as errors when trying to build the site or as warnings during the development server:<pre><code class=language-bash>11:58 AM 2025-03-01 ERROR Validation failed for '/home/amartin/Develop/Rust/norgolith/my-site/content/index.norg'
→ Schema applied: 'index'
→ Constraint violation for field 'title': Exceeds max length 12
</code></pre><h3 id=Common-Errors-and-Fixes>Common Errors and Fixes</h3><h4 id=Missing-Required-Field>Missing Required Field</h4><ul><li><strong>Error</strong>: <code>Missing field 'title'</code>.</ul><ul><li><strong>Fix</strong>: Add the missing field to your metadata.</ul><h4 id=Type-Mismatch>Type Mismatch</h4><ul><li><strong>Error</strong>: <code>Type mismatch for field 'version': expected string, got number</code>.</ul><ul><li><strong>Fix</strong>: Ensure the field value matches the expected type.</ul><h4 id=Constraint-Violation>Constraint Violation</h4><ul><li><strong>Error</strong>: <code>Constraint violation for field 'title': Exceeds max length 12</code>.</ul><ul><li><strong>Fix</strong>: Shorten the field value to meet the constraint.</ul><h4 id=Rule-Condition-Failed>Rule Condition Failed</h4><ul><li><strong>Error</strong>: <code>Rule condition failed: Missing condition field 'draft'</code>.</ul><ul><li><strong>Fix</strong>: Add the required condition field or update the rule.</ul></div></main><footer class="mt-8 py-4 px-6 w-full font-mono"><div class="flex justify-between items-center font-medium text-xs md:text-sm text-text-alt"><span>Copyright © 2025 <a class="text-blue hover:underline"href=https://github.com/NTBBloodbath>NTBBloodbath</a>. <br class=md:hidden> Licensed under GPLv2. </span><div class="flex flex-inline"><div class="mr-4 md:mr-6 lg:mr-8 last:mr-0"><a class=hover:text-blue href=https://github.com/NTBBloodbath/norgolith> <span>Github</span> </a></div></div></div></footer>